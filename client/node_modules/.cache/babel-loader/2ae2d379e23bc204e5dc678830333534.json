{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryanl\\\\Desktop\\\\crudTest\\\\client\\\\src\\\\components\\\\auth\\\\Dashboard.js\";\nimport React, { useEffect, Fragment, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { getUserInfo } from '../../actions/dashboard';\nimport { deleteUser } from '../../actions/login';\nimport '../../Reviews.css';\nimport '../../Buttons.css';\nimport PropTypes from 'prop-types';\nimport ViewReview from './ViewReview';\nimport { Redirect } from 'react-router-dom';\n\nconst Dashboard = ({\n  getUserInfo,\n  user,\n  auth,\n  deleteUser\n}) => {\n  const [deleteOption, optionSet] = useState({\n    popUp: false,\n    popUp2: false\n  });\n  useEffect(() => {\n    //Ensures getUser has been called first, setting loading to false to prevent race conditions\n    if (auth.loading === false) {\n      getUserInfo();\n    }\n  }, [getUserInfo, auth.loading]);\n\n  const handleDelete = () => optionSet(prevState => {\n    return { ...deleteOption,\n      popUp: !prevState.popUp\n    };\n  });\n\n  const handleReview = () => optionSet(prevState => {\n    return {\n      // ...deleteOption,\n      popUp2: !prevState.popUp2\n    };\n  });\n\n  console.log(deleteOption.popUp);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, !auth.isAuthenticated ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard fullPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 18\n    }\n  }, user.loading && auth.loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 51\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 21\n    }\n  }, \"LOADING...\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, \"Profile Information\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"Name: \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 36\n    }\n  }, auth.user.name), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 59\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 37\n    }\n  }, user.email), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 56\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, \"University: \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 42\n    }\n  }, user.university), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDelete,\n    className: \"delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fas fa-trash-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 71\n    }\n  }), \" Delete Account\"), deleteOption.popUp2 === false ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 56\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 82\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, \"Do you want to delete your review also?\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      const option = true;\n      handleReview();\n      deleteUser(option);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, \"Yes\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      const option = false;\n      handleReview();\n      deleteUser(option);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, \"No\")), !deleteOption.popUp ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 46\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 72\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, \"Are you sure you want to delete your account?\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      handleDelete();\n      handleReview();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, \"Yes\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, \"No\")), /*#__PURE__*/React.createElement(ViewReview, {\n    review: user.review,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  })));\n};\n\nconst mapStateToProps = state => {\n  return {\n    // From intial login/registration state\n    auth: state.register,\n    //From dashboard state\n    user: state.dashboard\n  };\n};\n\nDashboard.propTypes = {\n  getUserInfo: PropTypes.func.isRequired // deleteReview: PropTypes.func.isRequired,\n\n};\nexport default connect(mapStateToProps, {\n  getUserInfo,\n  deleteUser\n})(Dashboard);","map":{"version":3,"sources":["C:/Users/ryanl/Desktop/crudTest/client/src/components/auth/Dashboard.js"],"names":["React","useEffect","Fragment","useState","connect","getUserInfo","deleteUser","PropTypes","ViewReview","Redirect","Dashboard","user","auth","deleteOption","optionSet","popUp","popUp2","loading","handleDelete","prevState","handleReview","console","log","isAuthenticated","name","email","university","option","review","mapStateToProps","state","register","dashboard","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getUserInfo } from '../../actions/dashboard';\r\nimport { deleteUser } from '../../actions/login';\r\nimport '../../Reviews.css';\r\nimport '../../Buttons.css'\r\nimport PropTypes from 'prop-types';\r\nimport ViewReview from './ViewReview';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst Dashboard = ({ getUserInfo, user, auth, deleteUser }) => {\r\n\r\n    const [deleteOption, optionSet] = useState({\r\n        popUp: false,\r\n        popUp2: false\r\n    })\r\n    useEffect(() => {\r\n        //Ensures getUser has been called first, setting loading to false to prevent race conditions\r\n        if (auth.loading === false) {\r\n            getUserInfo()\r\n        }\r\n    }, [getUserInfo, auth.loading]);\r\n\r\n    const handleDelete = () => optionSet(\r\n        (prevState) => {\r\n            return {\r\n                ...deleteOption,\r\n                popUp: !prevState.popUp\r\n            }\r\n        }\r\n    )\r\n\r\n    const handleReview = () => optionSet(\r\n        (prevState) => {\r\n            return {\r\n                // ...deleteOption,\r\n                popUp2: !prevState.popUp2\r\n            }\r\n        }\r\n    )\r\n\r\n\r\n\r\n    console.log(deleteOption.popUp);\r\n    return (\r\n\r\n        <Fragment>\r\n            {(!auth.isAuthenticated ? (\r\n                <Redirect to='/'></Redirect>\r\n            ) : (<div className=\"dashboard fullPage\">\r\n                {(user.loading && auth.loading ? (<div>\r\n                    <h1>LOADING...</h1>\r\n                </div>) : (<div>\r\n                    <h1>Profile Information</h1>\r\n                    <h2>Name: </h2><p>{auth.user.name}</p><br />\r\n                    <h2>Email: </h2><p>{user.email}</p><br />\r\n                    <h2>University: </h2><p>{user.university}</p>\r\n                    <br />\r\n                    <button onClick={handleDelete} className=\"delete\"><i class=\"fas fa-trash-alt\"></i> Delete Account</button>\r\n                    {(deleteOption.popUp2 === false ? (<Fragment></Fragment>) : (<div>\r\n                        <p>Do you want to delete your review also?</p>\r\n                        <button onClick={() => {\r\n                            const option = true;\r\n                            handleReview();\r\n                            deleteUser(option);\r\n                        }}>Yes</button>\r\n                        <button onClick={() => {\r\n                            const option = false;\r\n                            handleReview();\r\n                            deleteUser(option);\r\n                        }}>No</button>\r\n                    </div>\r\n                    ))}\r\n                    {(!deleteOption.popUp ? (<Fragment></Fragment>) : (<div>\r\n                        <p>Are you sure you want to delete your account?</p>\r\n                        <button onClick={() => {\r\n                            handleDelete();\r\n                            handleReview();\r\n                        }}>Yes</button>\r\n                        <button onClick={handleDelete}>No</button>\r\n                    </div>))}\r\n                    <ViewReview review={user.review} />\r\n                </div>))}\r\n                <br />\r\n            </div>))}\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // From intial login/registration state\r\n        auth: state.register,\r\n        //From dashboard state\r\n        user: state.dashboard\r\n    }\r\n}\r\n\r\nDashboard.propTypes = {\r\n    getUserInfo: PropTypes.func.isRequired,\r\n    // deleteReview: PropTypes.func.isRequired,\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { getUserInfo, deleteUser })(Dashboard);"]},"metadata":{},"sourceType":"module"}