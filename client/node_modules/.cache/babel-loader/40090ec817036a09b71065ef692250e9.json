{"ast":null,"code":"import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\nimport { setHeader } from './actions/login';\nconst initialState = {};\nconst middleware = [thunk];\nconst store = createStore(rootReducer, initialState, composeWithDevTools(applyMiddleware(...middleware)));\nlet currentState = {\n  isAuthenticated: null,\n  token: null,\n  loading: true,\n  user: null\n};\nstore.subscribe(() => {\n  const prevState = currentState;\n  currentState = store.getState();\n  console.log(prevState);\n\n  if (prevState.token !== currentState.token) {\n    const token = currentState.register.token;\n    setHeader(token);\n  }\n});\nexport default store;","map":{"version":3,"sources":["C:/Users/ryanl/Desktop/crudTest/client/src/store.js"],"names":["createStore","applyMiddleware","composeWithDevTools","thunk","rootReducer","setHeader","initialState","middleware","store","currentState","isAuthenticated","token","loading","user","subscribe","prevState","getState","console","log","register"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,eAAtB,QAA6C,OAA7C;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,WAAP,MAAwB,YAAxB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,MAAMC,YAAY,GAAG,EAArB;AAEA,MAAMC,UAAU,GAAG,CAACJ,KAAD,CAAnB;AAEA,MAAMK,KAAK,GAAGR,WAAW,CACrBI,WADqB,EAErBE,YAFqB,EAGrBJ,mBAAmB,CAACD,eAAe,CAAC,GAAGM,UAAJ,CAAhB,CAHE,CAAzB;AAMA,IAAIE,YAAY,GAAG;AACfC,EAAAA,eAAe,EAAE,IADF;AACQC,EAAAA,KAAK,EAAE,IADf;AACqBC,EAAAA,OAAO,EAAE,IAD9B;AACoCC,EAAAA,IAAI,EAAE;AAD1C,CAAnB;AAIAL,KAAK,CAACM,SAAN,CAAgB,MAAM;AAClB,QAAMC,SAAS,GAAGN,YAAlB;AACAA,EAAAA,YAAY,GAAGD,KAAK,CAACQ,QAAN,EAAf;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;;AACA,MAAIA,SAAS,CAACJ,KAAV,KAAoBF,YAAY,CAACE,KAArC,EAA4C;AACxC,UAAMA,KAAK,GAAGF,YAAY,CAACU,QAAb,CAAsBR,KAApC;AACAN,IAAAA,SAAS,CAACM,KAAD,CAAT;AACH;AACJ,CARD;AAUA,eAAeH,KAAf","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\nimport { setHeader } from './actions/login';\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nlet currentState = {\r\n    isAuthenticated: null, token: null, loading: true, user: null\r\n}\r\n\r\nstore.subscribe(() => {\r\n    const prevState = currentState;\r\n    currentState = store.getState();\r\n    console.log(prevState);\r\n    if (prevState.token !== currentState.token) {\r\n        const token = currentState.register.token;\r\n        setHeader(token);\r\n    }\r\n})\r\n\r\nexport default store;\r\n"]},"metadata":{},"sourceType":"module"}